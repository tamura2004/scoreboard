(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[215],{189:(e,r,t)=>{Promise.resolve().then(t.bind(t,2543))},1193:(e,r,t)=>{"use strict";t.d(r,{Q:()=>d,S:()=>c});var n=t(5155),i=t(2115),l=t(7199);let o=(0,i.createContext)(void 0),a={PLAYERS:"scoreboard_players",HISTORY:"scoreboard_history",REGISTERED_PLAYERS:"scoreboard_registered_players"},s=[{id:"1",name:"プレイヤー1",score:0},{id:"2",name:"プレイヤー2",score:0},{id:"3",name:"プレイヤー3",score:0},{id:"4",name:"プレイヤー4",score:0}],d=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useScore must be used within ScoreProvider");return e},c=e=>{let{children:r}=e,[t,d]=(0,i.useState)(s),[c,h]=(0,i.useState)([]),[x,u]=(0,i.useState)([]),[m,f]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(()=>{try{let e=localStorage.getItem(a.PLAYERS),r=localStorage.getItem(a.HISTORY),t=localStorage.getItem(a.REGISTERED_PLAYERS);e&&d(JSON.parse(e)),r&&h(JSON.parse(r)),t&&u(JSON.parse(t))}catch(e){console.error("Failed to load from localStorage:",e)}finally{f(!0)}})()},[]),(0,i.useEffect)(()=>{if(m)try{localStorage.setItem(a.PLAYERS,JSON.stringify(t))}catch(e){console.error("Failed to save players to localStorage:",e)}},[t,m]),(0,i.useEffect)(()=>{if(m)try{localStorage.setItem(a.HISTORY,JSON.stringify(c))}catch(e){console.error("Failed to save history to localStorage:",e)}},[c,m]),(0,i.useEffect)(()=>{if(m)try{localStorage.setItem(a.REGISTERED_PLAYERS,JSON.stringify(x))}catch(e){console.error("Failed to save registered players to localStorage:",e)}},[x,m]),(0,n.jsx)(o.Provider,{value:{players:t,history:c,registeredPlayers:x,addPlayer:()=>{if(t.length>=l.iq)return void alert("プレイヤーは最大".concat(l.iq,"人までです"));let e={id:Date.now().toString(),name:"プレイヤー".concat(t.length+1),score:0};d([...t,e])},removeLastPlayer:()=>{if(t.length<=l.wC)return void alert("プレイヤーは最低".concat(l.wC,"人必要です"));let e=t[t.length-1];d(t.slice(0,-1)),h(c.filter(r=>r.playerId!==e.id))},updatePlayerName:(e,r)=>{d(t.map(t=>t.id===e?{...t,name:r}:t)),h(c.map(t=>t.playerId===e?{...t,playerName:r}:t))},addScore:(e,r)=>{let n=t.find(r=>r.id===e);if(!n)return;let i=n.score+r;if(i<l.o||i>l.sz)return void alert("スコアは".concat(l.o,"-").concat(l.sz,"の範囲で入力してください"));let o=c.filter(r=>r.playerId===e).length,a={id:Date.now().toString(),playerId:e,playerName:n.name,score:r,totalScore:i,timestamp:Date.now(),sequenceNumber:o+1};d(t.map(r=>r.id===e?{...r,score:i}:r)),h([a,...c])},undoHistory:e=>{let r=c.find(r=>r.id===e);if(!r||!t.find(e=>e.id===r.playerId))return;let n=r.totalScore-r.score;d(t.map(e=>e.id===r.playerId?{...e,score:n}:e)),h(c.filter(r=>r.id!==e))},resetAll:()=>{d(s),h([])},addRegisteredPlayer:e=>{u([...x,{id:Date.now().toString(),name:e.trim()}])},updateRegisteredPlayer:(e,r)=>{u(x.map(t=>t.id===e?{...t,name:r.trim()}:t))},deleteRegisteredPlayer:e=>{u(x.filter(r=>r.id!==e))}},children:r})}},2543:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var n=t(5155),i=t(8492),l=t(2531),o=t(7855),a=t(9488),s=t(357),d=t(6245),c=t(5970),h=t(9518),x=t(1008),u=t(4288),m=t(4389),f=t(5265),A=t(2021),S=t(9496),g=t(670),p=t(6370);let y=(0,t(645).A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var j=t(1665),v=t(6596),E=t(6541),R=t(2619),I=t.n(R),C=t(1193),w=t(2115);function P(){let{registeredPlayers:e,addRegisteredPlayer:r,updateRegisteredPlayer:t,deleteRegisteredPlayer:R}=(0,C.Q)(),[P,b]=(0,w.useState)(!1),[k,N]=(0,w.useState)(!1),[_,O]=(0,w.useState)(""),[D,W]=(0,w.useState)(""),Y=(0,w.useRef)(null),T=()=>{var e;null==(e=Y.current)||e.focus()},L=()=>{b(!1),W("")},H=()=>{let t=D.trim();if(t){if(e.some(e=>e.name===t))return void alert("同じ名前がすでに登録されています");r(t),L()}},J=()=>{N(!1),O(""),W("")},z=()=>{let r=D.trim();if(r){if(e.some(e=>e.id!==_&&e.name===r))return void alert("同じ名前がすでに登録されています");t(_,r),J()}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{position:"static",children:(0,n.jsxs)(l.A,{children:[(0,n.jsx)(o.A,{color:"inherit",component:I(),href:"/",startIcon:(0,n.jsx)(E.A,{}),children:"戻る"}),(0,n.jsx)(a.A,{variant:"h6",component:"div",sx:{flexGrow:1,textAlign:"center"},children:"プレイヤー名管理"}),(0,n.jsx)(s.A,{sx:{width:80}})]})}),(0,n.jsxs)(d.A,{maxWidth:"md",sx:{py:3},children:[(0,n.jsx)(s.A,{sx:{mb:2},children:(0,n.jsx)(o.A,{variant:"contained",startIcon:(0,n.jsx)(v.A,{}),onClick:()=>{W(""),b(!0)},fullWidth:!0,children:"プレイヤー名を追加"})}),0===e.length?(0,n.jsx)(c.A,{sx:{p:4,textAlign:"center"},children:(0,n.jsx)(a.A,{variant:"body1",color:"text.secondary",children:"登録されているプレイヤー名がありません"})}):(0,n.jsx)(c.A,{children:(0,n.jsx)(h.A,{sx:{py:0},children:e.map((r,t)=>(0,n.jsxs)(s.A,{children:[(0,n.jsx)(x.Ay,{secondaryAction:(0,n.jsxs)(s.A,{children:[(0,n.jsx)(u.A,{edge:"end",onClick:()=>{var e,t;return e=r.id,t=r.name,void(O(e),W(t),N(!0))},color:"primary",sx:{mr:1},children:(0,n.jsx)(j.A,{})}),(0,n.jsx)(u.A,{edge:"end",onClick:()=>{var e,t;return e=r.id,t=r.name,void(window.confirm("「".concat(t,"」を削除しますか？"))&&R(e))},color:"error",children:(0,n.jsx)(y,{})})]}),sx:{py:1.5},children:(0,n.jsx)(a.A,{variant:"body1",sx:{fontWeight:"bold"},children:r.name})}),t<e.length-1&&(0,n.jsx)(m.A,{})]},r.id))})})]}),(0,n.jsxs)(f.A,{open:P,onClose:L,maxWidth:"xs",fullWidth:!0,TransitionProps:{onEntered:T},children:[(0,n.jsx)(A.A,{children:"プレイヤー名を追加"}),(0,n.jsx)(S.A,{children:(0,n.jsx)(g.A,{value:D,onChange:e=>W(e.target.value),inputRef:Y,fullWidth:!0,margin:"dense",label:"プレイヤー名",onKeyDown:e=>{"Enter"===e.key&&H()}})}),(0,n.jsxs)(p.A,{children:[(0,n.jsx)(o.A,{onClick:L,children:"キャンセル"}),(0,n.jsx)(o.A,{onClick:H,variant:"contained",children:"追加"})]})]}),(0,n.jsxs)(f.A,{open:k,onClose:J,maxWidth:"xs",fullWidth:!0,TransitionProps:{onEntered:T},children:[(0,n.jsx)(A.A,{children:"プレイヤー名を編集"}),(0,n.jsx)(S.A,{children:(0,n.jsx)(g.A,{value:D,onChange:e=>W(e.target.value),inputRef:Y,fullWidth:!0,margin:"dense",label:"プレイヤー名",onKeyDown:e=>{"Enter"===e.key&&z()}})}),(0,n.jsxs)(p.A,{children:[(0,n.jsx)(o.A,{onClick:J,children:"キャンセル"}),(0,n.jsx)(o.A,{onClick:z,variant:"contained",children:"保存"})]})]})]})}},7199:(e,r,t)=>{"use strict";t.d(r,{iq:()=>n,o:()=>l,sz:()=>o,wC:()=>i});let n=10,i=1,l=0,o=999}},e=>{e.O(0,[422,229,725,496,441,255,358],()=>e(e.s=189)),_N_E=e.O()}]);