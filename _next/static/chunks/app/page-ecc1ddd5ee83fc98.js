(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{48:(e,t,r)=>{Promise.resolve().then(r.bind(r,9580))},1193:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a,S:()=>o});var i=r(5155),n=r(2115),s=r(7199);let l=(0,n.createContext)(void 0),a=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useScore must be used within ScoreProvider");return e},o=e=>{let{children:t}=e,[r,a]=(0,n.useState)([{id:"1",name:"プレイヤー1",score:0},{id:"2",name:"プレイヤー2",score:0},{id:"3",name:"プレイヤー3",score:0},{id:"4",name:"プレイヤー4",score:0}]),[o,c]=(0,n.useState)([]);return(0,i.jsx)(l.Provider,{value:{players:r,history:o,addPlayer:()=>{if(r.length>=s.iq)return void alert("プレイヤーは最大".concat(s.iq,"人までです"));let e={id:Date.now().toString(),name:"プレイヤー".concat(r.length+1),score:0};a([...r,e])},removeLastPlayer:()=>{if(r.length<=s.wC)return void alert("プレイヤーは最低".concat(s.wC,"人必要です"));let e=r[r.length-1];a(r.slice(0,-1)),c(o.filter(t=>t.playerId!==e.id))},updatePlayerName:(e,t)=>{a(r.map(r=>r.id===e?{...r,name:t}:r)),c(o.map(r=>r.playerId===e?{...r,playerName:t}:r))},addScore:(e,t)=>{let i=r.find(t=>t.id===e);if(!i)return;let n=i.score+t;if(n<s.o||n>s.sz)return void alert("スコアは".concat(s.o,"-").concat(s.sz,"の範囲で入力してください"));let l={id:Date.now().toString(),playerId:e,playerName:i.name,score:t,totalScore:n,timestamp:Date.now()};a(r.map(t=>t.id===e?{...t,score:n}:t)),c([l,...o])},undoHistory:e=>{let t=o.find(t=>t.id===e);if(!t||!r.find(e=>e.id===t.playerId))return;let i=t.totalScore-t.score;a(r.map(e=>e.id===t.playerId?{...e,score:i}:e)),c(o.filter(t=>t.id!==e))}},children:t})}},7199:(e,t,r)=>{"use strict";r.d(t,{iq:()=>i,o:()=>s,sz:()=>l,wC:()=>n});let i=10,n=1,s=0,l=999},9580:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var i=r(5155),n=r(8492),s=r(2531),l=r(317),a=r(7855),o=r(6245),c=r(357),d=r(9560),h=r(6596),x=r(5057),p=r(5427),u=r(2619),j=r.n(u),m=r(2115),f=r(539),g=r(4627),A=r(6869),v=r(809),y=r(4288),C=r(1193),w=r(11);let b=e=>{let{value:t,onChange:r}=e,n=e=>{let i=t+e;i>=0&&r(i)},s={width:"50%",height:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s","&:hover":{bgcolor:"action.hover"},"&:active":{bgcolor:"action.selected"}};return(0,i.jsxs)(c.A,{sx:{position:"relative",width:"120px",height:"80px",display:"flex",flexWrap:"wrap"},children:[(0,i.jsx)(w.A,{sx:s,onClick:()=>n(10)}),(0,i.jsx)(w.A,{sx:s,onClick:()=>n(1)}),(0,i.jsx)(w.A,{sx:s,onClick:()=>n(-10)}),(0,i.jsx)(w.A,{sx:s,onClick:()=>n(-1)}),(0,i.jsx)(c.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},children:(0,i.jsx)(l.A,{variant:"h2",fontWeight:"bold",color:"primary",children:t})})]})},k=e=>{let{player:t}=e,{updatePlayerName:r,addScore:n}=(0,C.Q)(),[s,a]=(0,m.useState)(0),[o,d]=(0,m.useState)(!1),[x,p]=(0,m.useState)(t.name);return(0,i.jsx)(f.A,{sx:{height:"100%"},children:(0,i.jsx)(g.A,{sx:{py:2,"&:last-child":{pb:2}},children:(0,i.jsxs)(A.A,{spacing:1,children:[(0,i.jsx)(c.A,{children:o?(0,i.jsx)(v.A,{value:x,onChange:e=>p(e.target.value),onBlur:()=>{x.trim()?r(t.id,x):p(t.name),d(!1)},autoFocus:!0,size:"small",fullWidth:!0}):(0,i.jsx)(l.A,{variant:"h6",onClick:()=>d(!0),sx:{cursor:"pointer"},noWrap:!0,children:t.name})}),(0,i.jsxs)(A.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,i.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",width:"120px"},children:(0,i.jsx)(l.A,{variant:"h2",sx:{fontWeight:"bold",color:"primary.main"},children:t.score})}),(0,i.jsx)(y.A,{color:"primary",onClick:()=>{0!==s&&(n(t.id,s),a(0))},disabled:0===s,sx:{bgcolor:"primary.main",color:"white",width:48,height:48,"&:hover":{bgcolor:"primary.dark"},"&:disabled":{bgcolor:"action.disabledBackground"}},children:(0,i.jsx)(h.A,{fontSize:"large"})}),(0,i.jsx)(c.A,{sx:{display:"flex",justifyContent:"center"},children:(0,i.jsx)(b,{value:s,onChange:a})})]})]})})})};var S=r(7199);function z(){let{players:e,addPlayer:t,removeLastPlayer:r}=(0,C.Q)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.A,{position:"static",children:(0,i.jsxs)(s.A,{children:[(0,i.jsx)(l.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"スコアボード"}),(0,i.jsx)(a.A,{color:"inherit",component:j(),href:"/history",startIcon:(0,i.jsx)(p.A,{}),children:"履歴"})]})}),(0,i.jsx)(o.A,{maxWidth:"lg",sx:{py:3},children:(0,i.jsxs)(d.A,{container:!0,spacing:2,children:[e.map(e=>(0,i.jsx)(d.A,{size:6,children:(0,i.jsx)(k,{player:e})},e.id)),(0,i.jsx)(d.A,{size:12,children:(0,i.jsxs)(c.A,{sx:{display:"flex",gap:2,mt:2},children:[(0,i.jsxs)(a.A,{variant:"outlined",onClick:t,startIcon:(0,i.jsx)(h.A,{}),disabled:e.length>=S.iq,size:"large",fullWidth:!0,children:["プレイヤーを追加 (",e.length,"/",S.iq,")"]}),(0,i.jsx)(a.A,{variant:"outlined",onClick:r,startIcon:(0,i.jsx)(x.A,{}),disabled:e.length<=S.wC,size:"large",fullWidth:!0,color:"error",children:"プレイヤーを削除"})]})})]})})]})}}},e=>{e.O(0,[422,512,323,728,441,255,358],()=>e(e.s=48)),_N_E=e.O()}]);